import{m as y,a as g,c as i,b as e,d as I,i as w,j as f,w as a,k as u,F as v,r as p,l as m,v as r,o as n,t as M}from"./lJU5grx9.js";import{u as D}from"./DRKCIaYE.js";import{u as b}from"./DtRd_GH-.js";import _ from"./BxrLLvFC.js";import"./CPv6exPV.js";const k={class:"row"},P={class:"col-6"},C={class:"col-6"},F={class:"row"},S=e("div",{class:"col-md-3"},[e("label",{for:"department-select"},"Select Department:")],-1),V={class:"col-md-3"},$=["value"],A={class:"col-md-3"},N={class:"col-md-3"},U={key:0,class:"row"},E=e("div",{class:"col-md-3"},[e("label",{for:"movie-select"},"Select Movie:")],-1),L={class:"col-md-3"},Y=["value"],B={class:"col-md-3"},j={class:"col-md-3"},O={key:1,class:"movie-details"},T={class:"row"},q=e("div",{class:"col-md-4"},[e("label",null,"Name")],-1),z={class:"col-md-8"},G={class:"row"},H=e("div",{class:"col-md-4"},[e("label",null,"Link")],-1),J={class:"col-md-8"},K={class:"row"},Q=e("div",{class:"col-md-4"},[e("label",null,"Cover Image")],-1),R={class:"col-md-8"},W={class:"row"},X={class:"col-2"},Z=["src"],x={class:"col"},ee={class:"row"},te=e("div",{class:"col-md-4"},[e("label",null,"Years")],-1),se={class:"col-md-8"},oe={class:"row"},le=e("div",{class:"col-md-4"},[e("label",null,"Description")],-1),ie={class:"col-md-8"},ne={key:0},de=e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("label",null,"Photos")])],-1),ae={class:"col-md-4"},re=["src"],ce={class:"col-md-4"},me=["onUpdate:modelValue"],ve={class:"col-md-4"},pe=["onClick"],he={class:"row"},ue={class:"col-12"},Me={class:"row"},De={class:"col-md-6"},be={class:"col-md-6"},ye={data(){return{selectedDepartmentIndex:null,selectedMovieIndex:null,coverImageFile:null,photoFile:null}},computed:{...y(D,["departments"]),selectedDepartment(){return this.selectedDepartmentIndex!==null?this.departments[this.selectedDepartmentIndex]:null},selectedMovie(){var l;return this.selectedDepartment&&this.selectedMovieIndex!==null?(l=this.selectedDepartment)==null?void 0:l.Movies[this.selectedMovieIndex]:null}},watch:{selectedDepartmentIndex(){this.selectedMovieIndex=0}},methods:{...g(D,["saveDepartment","saveAllDepartments"]),addDepartment(){const l={Department:`New Department ${this.departments.length+1}`,Movies:[]};this.$departmentStore.departments.push(l),this.selectedDepartmentIndex=this.$departmentStore.departments.length-1},deleteDepartment(){this.selectedDepartmentIndex!==null&&(this.$departmentStore.departments.splice(this.selectedDepartmentIndex,1),this.selectedDepartmentIndex=null,this.selectedMovieIndex=null)},addMovie(){var t,s,c;const l={Name:`New Movie ${((t=this.selectedDepartment)==null?void 0:t.Movies.length)+1}`,Link:"",Image:"",Years:"",Description:"",Photos:[]};(s=this.selectedDepartment)==null||s.Movies.push(l),this.selectedMovieIndex=((c=this.selectedDepartment)==null?void 0:c.Movies.length)-1},deleteMovie(){var l;this.selectedMovieIndex!==null&&((l=this.selectedDepartment)==null||l.Movies.splice(this.selectedMovieIndex,1),this.selectedMovieIndex=null)},addPhoto(){this.selectedMovie&&this.selectedMovie.Photos.push("")},deletePhoto(l){this.selectedMovie&&this.selectedMovie.Photos.splice(l,1)},async onFileChange(l){const t=l.target.files[0];if(t)try{const s=await b(t,`movies/${this.selectedDepartment.id}/${this.selectedMovieIndex}/coverImages/${t.name}`);this.selectedMovie.Image=s}catch(s){console.error("Error uploading cover image:",s)}},async onPhotoFileChange(l){const t=l.target.files[0];if(t)try{const s=await b(t,`movies/${this.selectedDepartment.id}/${this.selectedMovieIndex}/photos/${t.name}`);this.selectedMovie.Photos.push(s)}catch(s){console.error("Error uploading photo:",s)}},async saveMovie(){this.selectedDepartment&&this.selectedMovie&&await this.saveDepartment({department:this.selectedDepartment}).then(()=>{alert("Movie saved successfully.")}).catch(l=>{console.error("Error saving movie:",l),alert("Failed to save movie.")})},async saveAllMovies(){await this.saveAllDepartments().then(()=>{alert("All departments saved successfully.")}).catch(l=>{console.error("Error saving all departments:",l),alert("Failed to save all departments.")})}},mounted(){this.selectedDepartmentIndex=0,this.selectedMovieIndex=0}},ke=Object.assign(ye,{__name:"Film",setup(l){return(t,s)=>{var c;return n(),i("div",k,[e("div",P,[I(w(_))]),e("div",C,[e("form",{onSubmit:s[16]||(s[16]=f((...o)=>t.submitForm&&t.submitForm(...o),["prevent"]))},[e("div",F,[S,e("div",V,[a(e("select",{id:"department-select","onUpdate:modelValue":s[0]||(s[0]=o=>t.selectedDepartmentIndex=o)},[(n(!0),i(v,null,p(t.departments,(o,d)=>(n(),i("option",{key:d,value:d},M(o.Department),9,$))),128))],512),[[u,t.selectedDepartmentIndex]])]),e("div",A,[e("button",{class:"btn btn-primary",type:"button",onClick:s[1]||(s[1]=(...o)=>t.addDepartment&&t.addDepartment(...o))}," Add Department ")]),e("div",N,[t.selectedDepartmentIndex!==null?(n(),i("button",{key:0,class:"btn btn-danger",type:"button",onClick:s[2]||(s[2]=(...o)=>t.deleteDepartment&&t.deleteDepartment(...o))}," Delete Department ")):m("",!0)])]),t.selectedDepartmentIndex!==null?(n(),i("div",U,[E,e("div",L,[a(e("select",{id:"movie-select","onUpdate:modelValue":s[3]||(s[3]=o=>t.selectedMovieIndex=o)},[(n(!0),i(v,null,p((c=t.selectedDepartment)==null?void 0:c.Movies,(o,d)=>(n(),i("option",{key:d,value:d},M(o.Name),9,Y))),128))],512),[[u,t.selectedMovieIndex]])]),e("div",B,[e("button",{class:"btn btn-primary",type:"button",onClick:s[4]||(s[4]=(...o)=>t.addMovie&&t.addMovie(...o))}," Add Movie ")]),e("div",j,[t.selectedMovieIndex!==null?(n(),i("button",{key:0,class:"btn btn-danger",type:"button",onClick:s[5]||(s[5]=(...o)=>t.deleteMovie&&t.deleteMovie(...o))}," Delete Movie ")):m("",!0)])])):m("",!0),t.selectedMovieIndex!==null&&t.selectedMovie?(n(),i("div",O,[e("div",T,[q,e("div",z,[a(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=o=>t.selectedMovie.Name=o),style:{width:"inherit"}},null,512),[[r,t.selectedMovie.Name]])])]),e("div",G,[H,e("div",J,[a(e("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=o=>t.selectedMovie.Link=o),style:{width:"inherit"}},null,512),[[r,t.selectedMovie.Link]])])]),e("div",K,[Q,e("div",R,[e("div",W,[e("div",X,[e("img",{src:t.selectedMovie.Image,height:"100"},null,8,Z)]),e("div",x,[e("input",{type:"file",onChange:s[8]||(s[8]=(...o)=>t.onFileChange&&t.onFileChange(...o))},null,32),a(e("input",{type:"text","onUpdate:modelValue":s[9]||(s[9]=o=>t.selectedMovie.Image=o),style:{width:"inherit"}},null,512),[[r,t.selectedMovie.Image]])])])])]),e("div",ee,[te,e("div",se,[a(e("input",{type:"text","onUpdate:modelValue":s[10]||(s[10]=o=>t.selectedMovie.Years=o),style:{width:"inherit"}},null,512),[[r,t.selectedMovie.Years]])])]),e("div",oe,[le,e("div",ie,[a(e("textarea",{"onUpdate:modelValue":s[11]||(s[11]=o=>t.selectedMovie.Description=o),style:{width:"inherit"},rows:"5"},null,512),[[r,t.selectedMovie.Description]])])]),t.selectedMovie.Photos&&t.selectedMovie.Photos.length?(n(),i("div",ne,[de,(n(!0),i(v,null,p(t.selectedMovie.Photos,(o,d)=>(n(),i("div",{key:d,class:"photo row"},[e("div",ae,[e("img",{src:o,height:"100"},null,8,re)]),e("div",ce,[a(e("input",{type:"text","onUpdate:modelValue":h=>t.selectedMovie.Photos[d]=h,style:{width:"inherit"}},null,8,me),[[r,t.selectedMovie.Photos[d]]])]),e("div",ve,[e("button",{class:"btn btn-danger",type:"button",onClick:h=>t.deletePhoto(d)}," Delete Photo ",8,pe)])]))),128))])):m("",!0),e("div",he,[e("div",ue,[e("button",{type:"button",onClick:s[12]||(s[12]=(...o)=>t.addPhoto&&t.addPhoto(...o))}," Add Photo "),e("input",{type:"file",onChange:s[13]||(s[13]=(...o)=>t.onPhotoFileChange&&t.onPhotoFileChange(...o))},null,32)])]),e("div",Me,[e("div",De,[e("button",{class:"btn btn-primary",type:"button",onClick:s[14]||(s[14]=(...o)=>t.saveMovie&&t.saveMovie(...o))}," Save Movie ")]),e("div",be,[e("button",{class:"btn btn-primary",type:"button",onClick:s[15]||(s[15]=(...o)=>t.saveAllMovies&&t.saveAllMovies(...o))}," Save All Departments ")])])])):m("",!0)],32)])])}}});export{ke as default};
