import{n as b,q as y,c as d,a as e,s as a,v as h,F as c,u as p,x as m,y as r,z as w,o as i,t as M}from"./uYpLkJ4K.js";import{u as D}from"./B-Rqk9X5.js";import"./CBpPpCaY.js";const I={class:"row"},k=e("div",{class:"col-md-3"},[e("label",{for:"department-select"},"Select Department:")],-1),_={class:"col-md-3"},g=["value"],f={class:"col-md-3"},P={class:"col-md-3"},A={key:0,class:"row"},S=e("div",{class:"col-md-3"},[e("label",{for:"movie-select"},"Select Movie:")],-1),C={class:"col-md-3"},V=["value"],N={class:"col-md-3"},U={class:"col-md-3"},F={key:1,class:"movie-details"},$={class:"row"},L=e("div",{class:"col-md-4"},[e("label",null,"Name")],-1),Y={class:"col-md-8"},B={class:"row"},E=e("div",{class:"col-md-4"},[e("label",null,"Link")],-1),j={class:"col-md-8"},q={class:"row"},z=e("div",{class:"col-md-4"},[e("label",null,"Cover Image")],-1),O={class:"col-md-8"},T={class:"row"},G=e("div",{class:"col-md-4"},[e("label",null,"Years")],-1),H={class:"col-md-8"},J={class:"row"},K=e("div",{class:"col-md-4"},[e("label",null,"Description")],-1),Q={class:"col-md-8"},R={key:0},W=e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("label",null,"Photos")])],-1),X={class:"col-md-4"},Z=["src"],x={class:"col-md-4"},ee=["onUpdate:modelValue"],te={class:"col-md-4"},se=["onClick"],le={class:"row"},oe={class:"col-12"},de={class:"row"},ie={class:"col-md-6"},ne={class:"col-md-6"},ae={data(){return{selectedDepartmentIndex:null,selectedMovieIndex:null}},computed:{...b(D,["departments"]),selectedDepartment(){return this.selectedDepartmentIndex!==null?this.departments[this.selectedDepartmentIndex]:null},selectedMovie(){var o;return this.selectedDepartment&&this.selectedMovieIndex!==null?(o=this.selectedDepartment)==null?void 0:o.Movies[this.selectedMovieIndex]:null},isAuthenticated(){return this.$auth.isAuthenticated}},methods:{...y(D,["saveDepartment","saveAllDepartments"]),addDepartment(){const o={Department:`New Department ${this.departments.length+1}`,Movies:[]};this.$departmentStore.departments.push(o),this.selectedDepartmentIndex=this.$departmentStore.departments.length-1},deleteDepartment(){this.selectedDepartmentIndex!==null&&(this.$departmentStore.departments.splice(this.selectedDepartmentIndex,1),this.selectedDepartmentIndex=null,this.selectedMovieIndex=null)},addMovie(){var t,l,v;const o={Name:`New Movie ${((t=this.selectedDepartment)==null?void 0:t.Movies.length)+1}`,Link:"",Image:"",Years:"",Description:"",Photos:[]};(l=this.selectedDepartment)==null||l.Movies.push(o),this.selectedMovieIndex=((v=this.selectedDepartment)==null?void 0:v.Movies.length)-1},deleteMovie(){var o;this.selectedMovieIndex!==null&&((o=this.selectedDepartment)==null||o.Movies.splice(this.selectedMovieIndex,1),this.selectedMovieIndex=null)},addPhoto(){this.selectedMovie&&this.selectedMovie.Photos.push("")},deletePhoto(o){this.selectedMovie&&this.selectedMovie.Photos.splice(o,1)},async saveMovie(){this.selectedDepartment&&this.selectedMovie&&await this.saveDepartment({department:this.selectedDepartment}).then(()=>{alert("Movie saved successfully.")}).catch(o=>{console.error("Error saving movie:",o),alert("Failed to save movie.")})},async saveAllMovies(){await this.saveAllDepartments().then(()=>{alert("All departments saved successfully.")}).catch(o=>{console.error("Error saving all departments:",o),alert("Failed to save all departments.")})}},mounted(){this.selectedDepartmentIndex=0,this.selectedMovieIndex=0}},ce=Object.assign(ae,{__name:"Film",setup(o){return(t,l)=>{var v;return i(),d("div",null,[e("form",{onSubmit:l[14]||(l[14]=w((...s)=>t.submitForm&&t.submitForm(...s),["prevent"]))},[e("div",I,[k,e("div",_,[a(e("select",{id:"department-select","onUpdate:modelValue":l[0]||(l[0]=s=>t.selectedDepartmentIndex=s)},[(i(!0),d(c,null,p(t.departments,(s,n)=>(i(),d("option",{key:n,value:n},M(s.Department),9,g))),128))],512),[[h,t.selectedDepartmentIndex]])]),e("div",f,[e("button",{class:"btn btn-primary",type:"button",onClick:l[1]||(l[1]=(...s)=>t.addDepartment&&t.addDepartment(...s))}," Add Department ")]),e("div",P,[t.selectedDepartmentIndex!==null?(i(),d("button",{key:0,class:"btn btn-danger",type:"button",onClick:l[2]||(l[2]=(...s)=>t.deleteDepartment&&t.deleteDepartment(...s))}," Delete Department ")):m("",!0)])]),t.selectedDepartmentIndex!==null?(i(),d("div",A,[S,e("div",C,[a(e("select",{id:"movie-select","onUpdate:modelValue":l[3]||(l[3]=s=>t.selectedMovieIndex=s)},[(i(!0),d(c,null,p((v=t.selectedDepartment)==null?void 0:v.Movies,(s,n)=>(i(),d("option",{key:n,value:n},M(s.Name),9,V))),128))],512),[[h,t.selectedMovieIndex]])]),e("div",N,[e("button",{class:"btn btn-primary",type:"button",onClick:l[4]||(l[4]=(...s)=>t.addMovie&&t.addMovie(...s))}," Add Movie ")]),e("div",U,[t.selectedMovieIndex!==null?(i(),d("button",{key:0,class:"btn btn-danger",type:"button",onClick:l[5]||(l[5]=(...s)=>t.deleteMovie&&t.deleteMovie(...s))}," Delete Movie ")):m("",!0)])])):m("",!0),t.selectedMovieIndex!==null&&t.selectedMovie?(i(),d("div",F,[e("div",$,[L,e("div",Y,[a(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=s=>t.selectedMovie.Name=s),style:{width:"inherit"}},null,512),[[r,t.selectedMovie.Name]])])]),e("div",B,[E,e("div",j,[a(e("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=s=>t.selectedMovie.Link=s),style:{width:"inherit"}},null,512),[[r,t.selectedMovie.Link]])])]),e("div",q,[z,e("div",O,[a(e("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=s=>t.selectedMovie.Image=s),style:{width:"inherit"}},null,512),[[r,t.selectedMovie.Image]])])]),e("div",T,[G,e("div",H,[a(e("input",{type:"text","onUpdate:modelValue":l[9]||(l[9]=s=>t.selectedMovie.Years=s),style:{width:"inherit"}},null,512),[[r,t.selectedMovie.Years]])])]),e("div",J,[K,e("div",Q,[a(e("textarea",{"onUpdate:modelValue":l[10]||(l[10]=s=>t.selectedMovie.Description=s),style:{width:"inherit"},rows:"5"},null,512),[[r,t.selectedMovie.Description]])])]),t.selectedMovie.Photos&&t.selectedMovie.Photos.length?(i(),d("div",R,[W,(i(!0),d(c,null,p(t.selectedMovie.Photos,(s,n)=>(i(),d("div",{key:n,class:"photo row"},[e("div",X,[e("img",{src:s,height:"100"},null,8,Z)]),e("div",x,[a(e("input",{type:"text","onUpdate:modelValue":u=>t.selectedMovie.Photos[n]=u,style:{width:"inherit"}},null,8,ee),[[r,t.selectedMovie.Photos[n]]])]),e("div",te,[e("button",{class:"btn btn-danger",type:"button",onClick:u=>t.deletePhoto(n)}," Delete Photo ",8,se)])]))),128))])):m("",!0),e("div",le,[e("div",oe,[e("button",{type:"button",onClick:l[11]||(l[11]=(...s)=>t.addPhoto&&t.addPhoto(...s))}," Add Photo ")])]),e("div",de,[e("div",ie,[e("button",{class:"btn btn-primary",type:"button",onClick:l[12]||(l[12]=(...s)=>t.saveMovie&&t.saveMovie(...s))}," Save Movie ")]),e("div",ne,[e("button",{class:"btn btn-primary",type:"button",onClick:l[13]||(l[13]=(...s)=>t.saveAllMovies&&t.saveAllMovies(...s))}," Save All Departments ")])])])):m("",!0)],32)])}}});export{ce as default};
