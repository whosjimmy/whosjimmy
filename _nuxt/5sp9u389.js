import{_,c as d,a as s,f as p,K as x,t as c,H as v,I as w,L as h,e as V,n as M,o as a}from"./tuYbq89b.js";const S=window.setInterval,k={name:"YouTubeVideos",data(){return{videos:[],loading:!1,error:null,channelId:"UCPraC_i-mKFuwq17vUsrzWg",hoveredVideo:null,previewMode:"iframe",currentPreviewFrame:0,previewInterval:null,hoverTimeout:null,modalVideo:null,modalVisible:!1,modalExpanded:!1,expandingVideo:null,modalStyles:{},origin:window.location.origin}},async mounted(){await this.fetchVideos()},methods:{async fetchVideos(){this.loading=!0,this.error=null;try{const t=`https://www.youtube.com/feeds/videos.xml?channel_id=${this.channelId}`,e=`https://api.allorigins.win/get?url=${encodeURIComponent(t)}`,r=await fetch(e),m=await r.json();if(!r.ok)throw new Error("Failed to fetch videos");const i=new DOMParser().parseFromString(m.contents,"text/xml").querySelectorAll("entry");this.videos=Array.from(i).map(n=>{const u=n.querySelector("videoId")?.textContent,f=n.querySelector("title")?.textContent,g=n.querySelector("media\\:description, description")?.textContent||"",b=n.querySelector("published")?.textContent,y=n.querySelector("media\\:thumbnail, thumbnail")?.getAttribute("url")||`https://img.youtube.com/vi/${u}/mqdefault.jpg`;return{id:u,title:f,description:g,publishedAt:b,thumbnail:y}})}catch(t){this.error=t.message,console.error("Error fetching YouTube videos:",t)}finally{this.loading=!1}},startPreview(t){this.modalVideo||(this.hoverTimeout=setTimeout(()=>{this.hoveredVideo=t,this.previewMode==="thumbnails"&&(this.currentPreviewFrame=0,this.previewInterval=S(()=>{this.currentPreviewFrame=(this.currentPreviewFrame+1)%4},800))},300))},stopPreview(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null),this.hoveredVideo=null,this.previewInterval&&(clearInterval(this.previewInterval),this.previewInterval=null),this.currentPreviewFrame=0},openVideoModal(t){this.stopPreview();const e=this.$refs[`card-${t.id}`]?.[0];if(!e)return;const r=e.getBoundingClientRect();this.expandingVideo=t.id,this.modalStyles={position:"fixed",top:`${r.top}px`,left:`${r.left}px`,width:`${r.width}px`,height:`${r.height}px`,borderRadius:"12px"},this.modalVideo=t,this.modalVisible=!0,document.body.style.overflow="hidden",requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.expandModal()})})},expandModal(){const t=window.innerWidth,e=window.innerHeight,r=Math.min(t*.9,1200),m=Math.min(e*.9,800);this.modalStyles={position:"fixed",top:`${(e-m)/2}px`,left:`${(t-r)/2}px`,width:`${r}px`,height:`${m}px`,borderRadius:"16px"},this.modalExpanded=!0},closeVideoModal(){const t=this.$refs[`card-${this.modalVideo?.id}`]?.[0];if(t){const e=t.getBoundingClientRect();this.modalStyles={position:"fixed",top:`${e.top}px`,left:`${e.left}px`,width:`${e.width}px`,height:`${e.height}px`,borderRadius:"12px"}}this.modalExpanded=!1,setTimeout(()=>{this.modalVideo=null,this.modalVisible=!1,this.expandingVideo=null,this.modalStyles={},document.body.style.overflow=""},400)},getThumbnailSequence(t){return[`https://img.youtube.com/vi/${t}/mqdefault.jpg`,`https://img.youtube.com/vi/${t}/1.jpg`,`https://img.youtube.com/vi/${t}/2.jpg`,`https://img.youtube.com/vi/${t}/3.jpg`]},truncateDescription(t,e=150){return t?t.length>e?t.substring(0,e)+"...":t:""},formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}}},C={class:"youtube-videos"},P={key:0,class:"loading"},q={key:1,class:"error"},F={key:2,class:"videos-grid"},I=["onMouseenter","onClick"],T={class:"video-thumbnail"},D=["src","alt"],E=["src"],A={key:1,class:"thumbnail-preview"},R=["src","alt"],j={class:"video-info"},U={class:"video-title"},B={class:"video-description"},H={class:"video-meta"},W={class:"publish-date"},z={class:"modal-video-container"},L=["src"],K={class:"modal-video-info"},N={class:"modal-video-title"},Y={class:"modal-video-meta"},O={class:"modal-publish-date"},$={class:"modal-video-description"};function G(t,e,r,m,o,l){return a(),d("div",C,[e[7]||(e[7]=s("div",{class:"banner"},[s("img",{src:x})],-1)),o.loading?(a(),d("div",P,"Loading videos...")):o.error?(a(),d("div",q," Error loading videos: "+c(o.error),1)):(a(),d("div",F,[(a(!0),d(v,null,w(o.videos,i=>(a(),d("div",{key:i.id,ref_for:!0,ref:`card-${i.id}`,class:h(["video-card",{"is-expanding":o.expandingVideo===i.id}]),onMouseenter:n=>l.startPreview(i.id),onMouseleave:e[0]||(e[0]=(...n)=>l.stopPreview&&l.stopPreview(...n)),onClick:n=>l.openVideoModal(i)},[s("div",T,[s("img",{src:i.thumbnail,alt:i.title,class:h(["thumbnail-static",{"fade-out":o.hoveredVideo===i.id}])},null,10,D),o.hoveredVideo===i.id&&!o.modalVideo?(a(),d("iframe",{key:0,src:`https://www.youtube.com/embed/${i.id}?autoplay=1&mute=1&controls=0&showinfo=0&rel=0&modestbranding=1&loop=1&playlist=${i.id}`,class:"video-preview",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,E)):p("",!0),o.previewMode==="thumbnails"&&o.hoveredVideo===i.id&&!o.modalVideo?(a(),d("div",A,[(a(!0),d(v,null,w(l.getThumbnailSequence(i.id),(n,u)=>(a(),d("img",{key:u,src:n,alt:i.title,class:h(["preview-frame",{active:o.currentPreviewFrame===u}])},null,10,R))),128))])):p("",!0),e[4]||(e[4]=s("div",{class:"play-overlay"},"▶",-1)),e[5]||(e[5]=s("div",{class:"hover-progress"},null,-1))]),s("div",j,[s("h3",U,c(i.title),1),s("p",B,c(l.truncateDescription(i.description)),1),s("div",H,[s("span",W,c(l.formatDate(i.publishedAt)),1)])])],42,I))),128))])),o.modalVideo?(a(),d("div",{key:3,class:h(["video-modal-overlay",{"is-visible":o.modalVisible}]),onClick:e[3]||(e[3]=(...i)=>l.closeVideoModal&&l.closeVideoModal(...i))},[e[6]||(e[6]=s("div",{class:"video-modal-backdrop"},null,-1)),s("div",{class:h(["video-modal",{"is-expanded":o.modalExpanded}]),style:M(o.modalStyles),onClick:e[2]||(e[2]=V(()=>{},["stop"]))},[s("button",{class:"modal-close-btn","aria-label":"Close video",onClick:e[1]||(e[1]=(...i)=>l.closeVideoModal&&l.closeVideoModal(...i))}," ✕ "),s("div",z,[s("iframe",{src:`https://www.youtube.com/embed/${o.modalVideo.id}?autoplay=1&controls=1&showinfo=0&rel=0&modestbranding=1&enablejsapi=1&origin=${o.origin}`,class:"modal-video-player",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,L)]),s("div",K,[s("h2",N,c(o.modalVideo.title),1),s("div",Y,[s("span",O,c(l.formatDate(o.modalVideo.publishedAt)),1)]),s("p",$,c(o.modalVideo.description),1)])],6)],2)):p("",!0)])}const Q=_(k,[["render",G],["__scopeId","data-v-c8ee8238"]]);export{Q as default};
