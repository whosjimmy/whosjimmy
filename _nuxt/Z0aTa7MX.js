import{d as b,m as y,c as i,a as e,i as g,h as I,e as w,f as m,w as a,M as c,H as v,I as p,v as r,o as n,t as h}from"./tuYbq89b.js";import{u as M}from"./Di9MuZaG.js";import{u as D}from"./CtCxhA56.js";import f from"./DnksU2aI.js";import"./C9-xOcK1.js";const k={class:"row"},P={class:"col-6"},C={class:"col-6"},F={class:"row"},S={class:"col-md-3"},V=["value"],$={class:"col-md-3"},A={class:"col-md-3"},N={key:0,class:"row"},U={class:"col-md-3"},E=["value"],L={class:"col-md-3"},Y={class:"col-md-3"},B={key:1,class:"movie-details"},j={class:"row"},H={class:"col-md-8"},O={class:"row"},T={class:"col-md-8"},q={class:"row"},z={class:"col-md-8"},G={class:"row"},J={class:"col-2"},K=["src"],Q={class:"col"},R={class:"row"},W={class:"col-md-8"},X={class:"row"},Z={class:"col-md-8"},_={key:0},x={class:"col-md-4"},ee=["src"],te={class:"col-md-4"},se=["onUpdate:modelValue"],oe={class:"col-md-4"},le=["onClick"],ie={class:"row"},ne={class:"col-12"},de={class:"row"},ae={class:"col-md-6"},re={class:"col-md-6"},me={data(){return{selectedDepartmentIndex:null,selectedMovieIndex:null,coverImageFile:null,photoFile:null}},computed:{...y(M,["departments"]),selectedDepartment(){return this.selectedDepartmentIndex!==null?this.departments[this.selectedDepartmentIndex]:null},selectedMovie(){return this.selectedDepartment&&this.selectedMovieIndex!==null?this.selectedDepartment?.Movies[this.selectedMovieIndex]:null}},watch:{selectedDepartmentIndex(){this.selectedMovieIndex=0}},mounted(){this.selectedDepartmentIndex=0,this.selectedMovieIndex=0},methods:{...b(M,["saveDepartment","saveAllDepartments"]),addDepartment(){const l={Department:`New Department ${this.departments.length+1}`,Movies:[]};this.$departmentStore.departments.push(l),this.selectedDepartmentIndex=this.$departmentStore.departments.length-1},deleteDepartment(){this.selectedDepartmentIndex!==null&&(this.$departmentStore.departments.splice(this.selectedDepartmentIndex,1),this.selectedDepartmentIndex=null,this.selectedMovieIndex=null)},addMovie(){const l={Name:`New Movie ${this.selectedDepartment?.Movies.length+1}`,Link:"",Image:"",Years:"",Description:"",Photos:[]};this.selectedDepartment?.Movies.push(l),this.selectedMovieIndex=this.selectedDepartment?.Movies.length-1},deleteMovie(){this.selectedMovieIndex!==null&&(this.selectedDepartment?.Movies.splice(this.selectedMovieIndex,1),this.selectedMovieIndex=null)},addPhoto(){this.selectedMovie&&this.selectedMovie.Photos.push("")},deletePhoto(l){this.selectedMovie&&this.selectedMovie.Photos.splice(l,1)},async onFileChange(l){const s=l.target.files[0];if(s)try{const t=await D(s,`movies/${this.selectedDepartment.id}/${this.selectedMovieIndex}/coverImages/${s.name}`);this.selectedMovie.Image=t}catch(t){console.error("Error uploading cover image:",t)}},async onPhotoFileChange(l){const s=l.target.files[0];if(s)try{const t=await D(s,`movies/${this.selectedDepartment.id}/${this.selectedMovieIndex}/photos/${s.name}`);this.selectedMovie.Photos.push(t)}catch(t){console.error("Error uploading photo:",t)}},async saveMovie(){this.selectedDepartment&&this.selectedMovie&&await this.saveDepartment({department:this.selectedDepartment}).then(()=>{alert("Movie saved successfully.")}).catch(l=>{console.error("Error saving movie:",l),alert("Failed to save movie.")})},async saveAllMovies(){await this.saveAllDepartments().then(()=>{alert("All departments saved successfully.")}).catch(l=>{console.error("Error saving all departments:",l),alert("Failed to save all departments.")})}}},Me=Object.assign(me,{__name:"Film",setup(l){return(s,t)=>(n(),i("div",k,[e("div",P,[g(I(f))]),e("div",C,[e("form",{onSubmit:t[16]||(t[16]=w((...o)=>s.submitForm&&s.submitForm(...o),["prevent"]))},[e("div",F,[t[17]||(t[17]=e("div",{class:"col-md-3"},[e("label",{for:"department-select"},"Select Department:")],-1)),e("div",S,[a(e("select",{id:"department-select","onUpdate:modelValue":t[0]||(t[0]=o=>s.selectedDepartmentIndex=o)},[(n(!0),i(v,null,p(s.departments,(o,d)=>(n(),i("option",{key:d,value:d},h(o.Department),9,V))),128))],512),[[c,s.selectedDepartmentIndex]])]),e("div",$,[e("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=(...o)=>s.addDepartment&&s.addDepartment(...o))}," Add Department ")]),e("div",A,[s.selectedDepartmentIndex!==null?(n(),i("button",{key:0,class:"btn btn-danger",type:"button",onClick:t[2]||(t[2]=(...o)=>s.deleteDepartment&&s.deleteDepartment(...o))}," Delete Department ")):m("",!0)])]),s.selectedDepartmentIndex!==null?(n(),i("div",N,[t[18]||(t[18]=e("div",{class:"col-md-3"},[e("label",{for:"movie-select"},"Select Movie:")],-1)),e("div",U,[a(e("select",{id:"movie-select","onUpdate:modelValue":t[3]||(t[3]=o=>s.selectedMovieIndex=o)},[(n(!0),i(v,null,p(s.selectedDepartment?.Movies,(o,d)=>(n(),i("option",{key:d,value:d},h(o.Name),9,E))),128))],512),[[c,s.selectedMovieIndex]])]),e("div",L,[e("button",{class:"btn btn-primary",type:"button",onClick:t[4]||(t[4]=(...o)=>s.addMovie&&s.addMovie(...o))}," Add Movie ")]),e("div",Y,[s.selectedMovieIndex!==null?(n(),i("button",{key:0,class:"btn btn-danger",type:"button",onClick:t[5]||(t[5]=(...o)=>s.deleteMovie&&s.deleteMovie(...o))}," Delete Movie ")):m("",!0)])])):m("",!0),s.selectedMovieIndex!==null&&s.selectedMovie?(n(),i("div",B,[e("div",j,[t[19]||(t[19]=e("div",{class:"col-md-4"},[e("label",null,"Name")],-1)),e("div",H,[a(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.selectedMovie.Name=o),type:"text",style:{width:"inherit"}},null,512),[[r,s.selectedMovie.Name]])])]),e("div",O,[t[20]||(t[20]=e("div",{class:"col-md-4"},[e("label",null,"Link")],-1)),e("div",T,[a(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.selectedMovie.Link=o),type:"text",style:{width:"inherit"}},null,512),[[r,s.selectedMovie.Link]])])]),e("div",q,[t[21]||(t[21]=e("div",{class:"col-md-4"},[e("label",null,"Cover Image")],-1)),e("div",z,[e("div",G,[e("div",J,[e("img",{src:s.selectedMovie.Image,height:"100"},null,8,K)]),e("div",Q,[e("input",{type:"file",onChange:t[8]||(t[8]=(...o)=>s.onFileChange&&s.onFileChange(...o))},null,32),a(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.selectedMovie.Image=o),type:"text",style:{width:"inherit"}},null,512),[[r,s.selectedMovie.Image]])])])])]),e("div",R,[t[22]||(t[22]=e("div",{class:"col-md-4"},[e("label",null,"Years")],-1)),e("div",W,[a(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.selectedMovie.Years=o),type:"text",style:{width:"inherit"}},null,512),[[r,s.selectedMovie.Years]])])]),e("div",X,[t[23]||(t[23]=e("div",{class:"col-md-4"},[e("label",null,"Description")],-1)),e("div",Z,[a(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.selectedMovie.Description=o),style:{width:"inherit"},rows:"5"},null,512),[[r,s.selectedMovie.Description]])])]),s.selectedMovie.Photos&&s.selectedMovie.Photos.length?(n(),i("div",_,[t[24]||(t[24]=e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("label",null,"Photos")])],-1)),(n(!0),i(v,null,p(s.selectedMovie.Photos,(o,d)=>(n(),i("div",{key:d,class:"photo row"},[e("div",x,[e("img",{src:o,height:"100"},null,8,ee)]),e("div",te,[a(e("input",{"onUpdate:modelValue":u=>s.selectedMovie.Photos[d]=u,type:"text",style:{width:"inherit"}},null,8,se),[[r,s.selectedMovie.Photos[d]]])]),e("div",oe,[e("button",{class:"btn btn-danger",type:"button",onClick:u=>s.deletePhoto(d)}," Delete Photo ",8,le)])]))),128))])):m("",!0),e("div",ie,[e("div",ne,[e("button",{type:"button",onClick:t[12]||(t[12]=(...o)=>s.addPhoto&&s.addPhoto(...o))}," Add Photo "),e("input",{type:"file",onChange:t[13]||(t[13]=(...o)=>s.onPhotoFileChange&&s.onPhotoFileChange(...o))},null,32)])]),e("div",de,[e("div",ae,[e("button",{class:"btn btn-primary",type:"button",onClick:t[14]||(t[14]=(...o)=>s.saveMovie&&s.saveMovie(...o))}," Save Movie ")]),e("div",re,[e("button",{class:"btn btn-primary",type:"button",onClick:t[15]||(t[15]=(...o)=>s.saveAllMovies&&s.saveAllMovies(...o))}," Save All Departments ")])])])):m("",!0)],32)])]))}});export{Me as default};
